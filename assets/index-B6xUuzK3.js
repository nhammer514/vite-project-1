import*as d from"https://cdn.skypack.dev/three@0.128.0/build/three.module.js";import{OBJLoader as u}from"https://cdn.skypack.dev/three@0.128.0/examples/jsm/loaders/OBJLoader.js";import{MTLLoader as g}from"https://cdn.skypack.dev/three@0.128.0/examples/jsm/loaders/MTLLoader.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))w(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&w(p)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function w(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const c=.1,f=.01,i={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1,KeyW:!1,KeyA:!1,KeyS:!1,KeyD:!1};window.addEventListener("keydown",e=>{i.hasOwnProperty(e.code)&&(i[e.code]=!0)});window.addEventListener("keyup",e=>{i.hasOwnProperty(e.code)&&(i[e.code]=!1)});function h(e){i.ArrowUp&&(e.rotation.x-=f),i.ArrowDown&&(e.rotation.x+=f),i.ArrowLeft&&(e.rotation.y+=f),i.ArrowRight&&(e.rotation.y-=f);const t=new d.Vector3;i.KeyW&&(e.getWorldDirection(t),e.position.add(t.multiplyScalar(c))),i.KeyS&&(e.getWorldDirection(t),e.position.add(t.multiplyScalar(-c))),i.KeyA&&(e.getWorldDirection(t),e.position.add(t.cross(e.up).multiplyScalar(-c))),i.KeyD&&(e.getWorldDirection(t),e.position.add(t.cross(e.up).multiplyScalar(c))),e.position.setY(0)}const l=new d.Scene,s=new d.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),a=new d.WebGLRenderer({canvas:document.querySelector("#bg")}),L=new d.TextureLoader().load("images/background.PNG");l.background=L;const A=new g;A.load("models/levels/cottage/cottage.mtl",e=>{e.preload();let t=new u;t.setMaterials(e),t.load("models/levels/cottage/cottage.obj",function(r){l.add(r),r.scale.set(5,5,5),r.position.setY(-1),r.position.setX(-15),r.position.setZ(70)})});const S=new g;S.load("models/levels/cottage/cottage.mtl",e=>{e.preload();let t=new u;t.setMaterials(e),t.load("models/levels/cottage/cottage.obj",function(r){l.add(r)})});const y=new d.AmbientLight(16777215,1);y.position.set(25,-15,-400);l.add(y);function m(){requestAnimationFrame(m),h(s),a.render(l,s)}m();window.addEventListener("resize",()=>{s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight)});a.setPixelRatio(window.devicePixelRatio);a.setSize(window.innerWidth,window.innerHeight);s.position.setZ(50);s.position.setX(-3);a.render(l,s);
